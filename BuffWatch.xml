<Ui xmlns="http://www.blizzard.com/wow/ui" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <Frame name="BuffwatchFrame" clampedToScreen="true" movable="true" parent="UIParent"> <!--parent="UIParent"-->
  
    <Size>
      <AbsDimension x="150" y="44" />
    </Size>

    <Anchors>
      <Anchor point="CENTER" relativeTo="UIParent">
        <Offset>
          <AbsDimension x="200" y="200" />
        </Offset>
      </Anchor>
    </Anchors>
        
    <Frames>

      <Frame name="$parent_Background" SetAllPoints="true">

        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
          <BackgroundInsets>
            <AbsInset left="2" right="2" top="2" bottom="2" />
          </BackgroundInsets>
          <TileSize>
            <AbsValue val="12" />
          </TileSize>
          <EdgeSize>
            <AbsValue val="12" />
          </EdgeSize>
          <BorderColor r="0" g="0" b="0" />
        </Backdrop>

      </Frame>

      <CheckButton name="$parent_LockAll" inherits="UICheckButtonTemplate">
        <Size>
          <AbsDimension x="18" y="18"/>
        </Size>
        <Anchors>
          <Anchor point="TOPLEFT">
            <Offset>
              <AbsDimension x="5" y="-2"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnClick>
            Buffwatch_Set_AllChecks(this:GetChecked());
          </OnClick>
        </Scripts>
      </CheckButton>

      <Button name="$parent_Header">
        <Size>
          <AbsDimension x="100" y="12"/>
        </Size>
        <Anchors>
          <Anchor point="TOP">
            <Offset>
              <AbsDimension x="0" y="-4"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Layers>
          <Layer level="OVERLAY">
            <FontString inherits="GameFontNormalSmall" setAllPoints="true" text="Buffwatch" />
          </Layer>
        </Layers>
        <Scripts>
          <OnLoad>
            this:RegisterForClicks("LeftButtonUp", "RightButtonUp");
            this:RegisterForDrag("LeftButton");
          </OnLoad>
          <OnClick>
            Buffwatch_Header_Clicked(button, down);
          </OnClick>
        </Scripts>
      </Button>

      <Frame name="$parent_DropDown" inherits="UIDropDownMenuTemplate">
        <Anchors>
          <Anchor point="TOP">
            <Offset>
              <AbsDimension x="0" y="0"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnLoad>
            Buffwatch_DropDown_OnLoad();
          </OnLoad>
        </Scripts>
      </Frame> 

      <Frame name="$parent_PlayerFrame">

        <Anchors>
          <Anchor point="TOPLEFT">
            <Offset>
              <AbsDimension x="6" y="-18"/>
            </Offset>
          </Anchor>
          <Anchor point="BOTTOMRIGHT">
            <Offset>
              <AbsDimension x="-6" y="6"/>
            </Offset>
          </Anchor>
        </Anchors>
        
      </Frame>
      
    </Frames>
    
    <Scripts>

      <OnLoad>
        this:RegisterForDrag("LeftButton");
        Buffwatch_OnLoad();
      </OnLoad>
      <OnEvent>
        Buffwatch_OnEvent(event, ...);
      </OnEvent>
      <OnMouseDown>
        Buffwatch_MouseDown(button);
      </OnMouseDown>
      <OnMouseUp>
        Buffwatch_MouseUp(button);
      </OnMouseUp>
    </Scripts>
    
  </Frame>
  
  <!--==================================================================================-->

  <CheckButton name="Buffwatch_LockButton_Template" inherits="UICheckButtonTemplate" hidden="false" virtual="true">
    <Size>
      <AbsDimension x="16" y="16"/>
    </Size>
    <Scripts>
      <OnClick>
        Buffwatch_Check_Clicked(button, down);
      </OnClick>
    </Scripts>
  </CheckButton>

  <Button name="Buffwatch_PlayerName_Template" inherits="SecureActionButtonTemplate" hidden="false" virtual="true">
    <Size>
      <AbsDimension x="18" y="10"/>
    </Size>
    <Layers>
      <Layer level="OVERLAY">
        <FontString name="$parentText" inherits="GameFontNormalSmall" justifyH="LEFT"/>
      </Layer>
    </Layers>
    <Scripts>
      <OnLoad>
        this:RegisterForClicks("LeftButtonUp", "RightButtonUp");
      </OnLoad>
    </Scripts>
  </Button>

  <Button name="Buffwatch_BuffButton_Template" inherits="SecureActionButtonTemplate" hidden="false" virtual="true">
    <Size>
      <AbsDimension x="18" y="18"/>
    </Size>
    <Layers>
      <Layer level="ARTWORK">
        <Texture name="$parentIcon"/>
      </Layer>
    </Layers>
    <Scripts>
      <OnLoad>
        this:RegisterForClicks("LeftButtonUp", "RightButtonUp");
      </OnLoad>
      <PostClick>
        Buffwatch_Buff_Clicked(button, down);
      </PostClick>
      <OnEnter>
        Buffwatch_Buff_Tooltip(motion);
      </OnEnter>
      <OnLeave>
        GameTooltip:Hide();
      </OnLeave>
    </Scripts>
  </Button>
<!--
  <Button name="Buffwatch_DebuffButton_Template" hidden="true" virtual="true">
    <Size>
      <AbsDimension x="18" y="18"/>
    </Size>
    <Layers>
      <Layer level="ARTWORK">
        <Texture name="$parentIcon"/>
      </Layer>
    </Layers>
    <Scripts>
      <OnEnter>
        Buffwatch_Buff_Tooltip(motion);
      </OnEnter>
      <OnLeave>
        GameTooltip:Hide();
      </OnLeave>
    </Scripts>
  </Button>
-->
  <Frame name="Buffwatch_Player_Template" hidden="false" virtual="true">
    <Size>
      <AbsDimension x="100" y="18"/>
    </Size>
    <Frames>
      <CheckButton name="$parent_Lock" inherits="Buffwatch_LockButton_Template">
        <Anchors>
          <Anchor point="TOPLEFT">
            <Offset>
              <AbsDimension x="0" y="-1"/>
            </Offset>
          </Anchor>
        </Anchors>
      </CheckButton>

      <Button name="$parent_Name" inherits="Buffwatch_PlayerName_Template">
        <Anchors>
          <Anchor point="TOPLEFT" relativeTo="$parent_Lock" relativePoint="TOPRIGHT">
            <Offset>
              <AbsDimension x="-1" y="-3"/>
            </Offset>
          </Anchor>
        </Anchors>
      </Button>

      <Button name="$parent_Buff1" inherits="Buffwatch_BuffButton_Template" id="1">
        <Anchors>
          <Anchor point="TOPLEFT" relativeTo="$parent_Name" relativePoint="TOPRIGHT">
            <Offset>
              <AbsDimension x="5" y="4"/>
            </Offset>
          </Anchor>
        </Anchors>
      </Button>      

    </Frames>
  </Frame>  
  
</Ui>